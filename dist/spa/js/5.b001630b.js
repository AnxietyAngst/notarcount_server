(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"8b24":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"q-pa-md bg-transparent text-white flex flex-center",attrs:{elevated:"",flat:""}},[a("q-tabs",{staticClass:"text-purple",attrs:{"narrow-indicator":"",dense:"",align:"center"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{ripple:{color:"orange"},name:"createEntry",icon:"create",label:"Создание"}}),a("q-tab",{attrs:{ripple:{color:"orange"},name:"checkEntries",icon:"check",label:"Просмотр"}}),a("q-tab",{attrs:{ripple:{color:"orange"},name:"analytics",icon:"bar_chart",label:"Аналитика"}})],1)],1),a("q-page-container",[a("q-tab-panels",{staticClass:"flex flex-center",attrs:{animated:"",swipeable:"","transition-prev":"fade","transition-next":"fade"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-pa-none bg-grey-1",attrs:{name:"createEntry"}},[a("createEntryComponent")],1),a("q-tab-panel",{staticClass:"q-pa-none bg-grey-1",attrs:{name:"checkEntries"}},[a("statsComponent")],1),a("q-tab-panel",{staticClass:"q-pa-none bg-grey-1",attrs:{name:"analytics"}},[a("analyticsComponent")],1)],1)],1)],1)},r=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),i=a.n(o),s=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-center"},[a("q-table",{staticClass:"createEntryTable",attrs:{grid:"",data:t.listTableData,columns:t.columns,"row-key":"id",loading:t.loading,"virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("q-btn",{attrs:{color:"primary",flat:"",icon:"add",disable:t.loading},on:{click:t.addRow}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{icon:"remove",flat:"",color:"primary",disable:t.loading},on:{click:t.removeRow}}),a("q-space"),a("q-btn",{attrs:{color:"primary",flat:"",icon:"send",disable:t.loading},on:{click:t.sendData}})]},proxy:!0},{key:"item",fn:function(e){return[a("div",{class:t.$q.screen.width>830?"fit col q-pa-md":"fit"},[a("q-card",{staticClass:"bg-grey-1 flex flex-center"},[a("q-list",{attrs:{dense:""}},t._l(e.cols,(function(n){return a("q-item",{key:n.name},[a("q-item-section",{staticClass:"flex flex-center"},["courierCost"===n.name||"manager"===n.name||"seller"===n.name?a("div",[a("q-select",{staticClass:"entrySelect flex",attrs:{label:n.label,color:"dark",value:e.row[""+n.name],"use-input":"","use-chips":"","hide-dropdown-icon":"","new-value-mode":"add"},on:{input:function(a){return t.mutateComputedData(a,e.rowIndex,n.name)}},scopedSlots:t._u([{key:"selected",fn:function(){return[a("q-chip",{staticClass:"addEntryChip q-pa-md bg-purple-1",attrs:{dense:"",label:e.row[""+n.name]}})]},proxy:!0}],null,!0)})],1):a("div",[a("q-select",{staticClass:"entrySelect flex",attrs:{label:n.label,color:"dark",value:e.row[""+n.name],"use-input":"","use-chips":"","hide-dropdown-icon":"","new-value-mode":"add"},on:{input:function(a){return t.mutateComputedData(a,e.rowIndex,n.name)}},scopedSlots:t._u([{key:"selected",fn:function(){return[a("q-chip",{staticClass:"addEntryChip q-pa-md bg-red-2",attrs:{dense:"",label:e.row[""+n.name]}})]},proxy:!0}],null,!0)})],1)])],1)})),1)],1)],1)]}}])})],1)},c=[],d=[{name:"partnerName",align:"left",label:"Партнёр",field:"partnerName"},{name:"documentsCount",align:"center",label:"Количество",field:"documentsCount"},{name:"notariusCost",align:"center",label:"Нотариус",field:"notariusCost"},{name:"translatorCost",align:"center",label:"Переводчик",field:"translatorCost"},{name:"totalAmount",align:"center",label:"Цена",field:"totalAmount"},{name:"courierCost",align:"center",label:"Курьер",field:"courierCost"},{name:"manager",align:"center",label:"Менеджер",field:"manager"},{name:"seller",align:"center",label:"Продавец",field:"seller"}],p=d;a("f7be");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){i()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"createEntryComponent",computed:m({},Object(s["c"])({listTableData:"entriesStore/listTableData"})),data:function(){return{loading:!1,columns:p,pagination:{rowsPerPage:this.$q.screen.width<=830?1:2}}},methods:m(m({},Object(s["b"])({addRow:"entriesStore/addRow",removeRow:"entriesStore/removeRow",sendData:"entriesStore/sendData",changeColValue:"entriesStore/changeColValue"})),{},{mutateComputedData:function(t,e,a){this.changeColValue({newValue:t,rowIndex:e,colName:a})}})},b=f,h=a("2877"),g=a("eebe"),y=a.n(g),q=a("9989"),w=a("eaac"),C=a("9c40"),v=a("2c91"),x=a("f09f"),O=a("1c1c"),k=a("66e5"),j=a("4074"),D=a("ddd8"),_=a("b047"),S=Object(h["a"])(b,l,c,!1,null,null,null),Q=S.exports;y()(S,"components",{QPage:q["a"],QTable:w["a"],QBtn:C["a"],QSpace:v["a"],QCard:x["a"],QList:O["a"],QItem:k["a"],QItemSection:j["a"],QSelect:D["a"],QChip:_["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-center"},[a("q-virtual-scroll",{staticClass:"statsVirtualScroll",attrs:{items:t.listWeeks},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,r=e.index;return[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple",value:{color:n.finished?"green":"red"},expression:"{color: item.finished ? 'green' : 'red'}"}],key:r,staticClass:"q-my-sm"},[a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{staticClass:"q-pa-xs flex flex-center",attrs:{color:n.finished?"green":"red",icon:n.finished?"done":"clear",flat:""}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(n.periodFrom.fullDate))]),a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s("string"===typeof n.periodTill?n.periodTill:n.periodTill.fullDate))])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-fab",{attrs:{color:"primary",icon:"keyboard_arrow_left",direction:"left",flat:""}},[a("q-fab-action",{attrs:{color:"primary",icon:"search",flat:""},on:{click:function(e){return t.showWeeks(n)}}}),a("q-badge",{attrs:{floating:"",color:"green",transparent:"",label:n.weekStats.weekDocuments}}),a("q-fab-action",{attrs:{color:"primary",icon:"show_chart",flat:""},on:{click:function(e){return t.showAnalytics(n)}}})],1)],1)],1)]}}])})],1)},E=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin q-pt-md"},[a("q-card-section",{staticClass:"flex flex-center"},[a("div",{staticClass:"flex flex-center"},[a("q-chip",{staticClass:"col-3 col-sm-6",attrs:{outline:"",square:"",color:"red","text-color":"white",icon:"assignment",label:t.item.weekStats.weekDocuments}}),a("q-chip",{staticClass:"col-3 col-sm-6",attrs:{outline:"",square:"",color:"red","text-color":"white",icon:"add",label:t.item.weekStats.weekIncome}}),a("q-chip",{staticClass:"col-3 col-sm-6",attrs:{outline:"",square:"",color:"red","text-color":"white",icon:"remove",label:t.item.weekStats.weekExpense.total}},[a("q-tooltip",{attrs:{"content-class":"bg-white",anchor:"bottom middle",self:"top middle",offset:[10,10]}},[a("q-chip",{attrs:{outline:"",square:"",color:"red","text-color":"white",icon:"directions_bike",label:t.item.weekStats.weekExpense.courierCost}}),a("q-chip",{attrs:{outline:"",square:"",color:"red","text-color":"white",icon:"storefront",label:t.item.weekStats.weekExpense.seller}}),a("q-chip",{attrs:{outline:"",square:"",color:"red","text-color":"white",icon:"emoji_people",label:t.item.weekStats.weekExpense.manager}})],1)],1),a("q-chip",{staticClass:"col-3 col-sm-6",attrs:{outline:"",square:"",color:"green","text-color":"white",icon:"timeline",label:t.item.weekStats.weekRevenue}})],1),a("q-list",{staticClass:"q-mt-md rounded-borders full-width",attrs:{dense:"",bordered:"",padding:""}},t._l(t.item.weekEntryData,(function(e){return a("q-item",{key:e.id,staticClass:"items-center justify-between"},[t.$q.screen.width>415?a("q-item-section",{staticClass:"flex flex-center",attrs:{avatar:""}},[a("q-fab",{attrs:{icon:"keyboard_arrow_right",color:"primary",flat:"",direction:"right",padding:"md"}},[a("q-badge",{staticClass:"flex flex-center q-ml-sm",staticStyle:{width:"48px"},attrs:{outline:"",color:"red"}},[t._v(t._s(e.dayStats.dayIncome))]),a("q-badge",{staticClass:"flex flex-center q-ml-sm",staticStyle:{width:"48px"},attrs:{outline:"",color:"red"}},[t._v(t._s(e.dayStats.dayExpense.total))]),a("q-badge",{staticClass:"flex flex-center q-ml-sm",staticStyle:{width:"48px"},attrs:{outline:"",color:"green"}},[t._v(t._s(e.dayStats.dayRevenue))])],1)],1):a("q-item-section",[a("div",{staticClass:"row flex flex-center fit"},[a("q-badge",{staticClass:"flex flex-center",staticStyle:{width:"48px"},attrs:{outline:"",color:"red"}},[t._v(t._s(e.dayStats.dayIncome))]),a("q-badge",{staticClass:"flex flex-center",staticStyle:{width:"48px","margin-left":"5px"},attrs:{outline:"",color:"red"}},[t._v(t._s(e.dayStats.dayExpense.total))]),a("q-badge",{staticClass:"flex flex-center",staticStyle:{width:"48px","margin-left":"5px"},attrs:{outline:"",color:"green"}},[t._v(t._s(e.dayStats.dayRevenue))])],1)]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(a){return t.showDay(e)}}},[t._v(t._s(t.fmt(e.createdAt.day,e.dayStats.dayDocuments)))])],1)],1)})),1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"OK"},on:{click:t.onOKClick}})],1)],1)],1)],1)},A=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",{staticClass:"flex flex-center q-pa-md"},[a("q-table",{attrs:{grid:"",title:"",data:t.actualDay.dayEntryData,columns:t.columns,"visible-columns":t.visubleColumns,"row-key":"id","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("div",{staticClass:"q-pa-xs col-12"},[a("q-card",[a("q-card-section",{staticClass:"text-center"},[t._v(t._s(e.row.partnerName))]),a("q-separator"),a("q-card-section",{staticClass:"flex flex-center"},[a("q-list",{attrs:{separator:""}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:"","active-class":"bg-transparent text-grey-8"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"subject"}})],1),a("q-item-section",{attrs:{side:""}},[t._v(t._s(e.row.documentsCount))])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:"","active-class":"bg-transparent text-grey-8"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"translate"}})],1),a("q-item-section",{attrs:{side:""}},[t._v(t._s(e.row.translatorCost))])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:"","active-class":"bg-transparent text-grey-8"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"work_outline"}})],1),a("q-item-section",{attrs:{side:""}},[t._v(t._s(e.row.notariusCost))])],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:"","active-class":"bg-transparent text-grey-8"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"credit_card"}})],1),a("q-item-section",{attrs:{side:""}},[t._v(t._s(e.row.totalAmount))])],1)],1)],1)],1)],1)]}}])})],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"OK"},on:{click:t.onOKClick}})],1)],1)],1)},T=[],R={name:"tDialogComponent",data:function(){return{columns:p,visubleColumns:["partnerName","documentsCount","notariusCost","translatorCost","totalAmount"],pagination:{rowsPerPage:0}}},props:{actualDay:Object},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()}}},V=R,N=a("24e8"),W=a("a370"),H=a("eb85"),K=a("0016"),L=a("4b7e"),B=a("714f"),F=Object(h["a"])(V,I,T,!1,null,null,null),z=F.exports;y()(F,"components",{QDialog:N["a"],QCard:x["a"],QCardSection:W["a"],QTable:w["a"],QSeparator:H["a"],QList:O["a"],QItem:k["a"],QItemSection:j["a"],QIcon:K["a"],QCardActions:L["a"],QBtn:C["a"]}),y()(F,"directives",{Ripple:B["a"]});var J={name:"wDialogComponent",components:{tDialogComponent:z},props:{item:Object},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},showDay:function(t){this.$q.dialog({component:z,actualDay:t})},fmt:function(t,e){return"".concat(t," | ").concat(e>=10?e:"0".concat(e))}}},M=J,G=a("05c0"),U=a("c294"),X=a("58a8"),Y=Object(h["a"])(M,$,A,!1,null,null,null),Z=Y.exports;y()(Y,"components",{QDialog:N["a"],QCard:x["a"],QCardSection:W["a"],QChip:_["a"],QTooltip:G["a"],QList:O["a"],QItem:k["a"],QItemSection:j["a"],QFab:U["a"],QBadge:X["a"],QBtn:C["a"],QCardActions:L["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin q-pt-md"},[a("q-card-section",{staticClass:"flex flex-center justify-around"},[a("VueApexCharts",{attrs:{type:"line",options:t.options,series:t.series}})],1)],1)],1)},et=[],at=a("1321"),nt=a.n(at),rt={name:"aDialogComponent",components:{VueApexCharts:nt.a},data:function(){return{options:{chart:{id:"dialogChart",toolbar:{show:!1},zoom:{enabled:!1},stroke:{curve:"straight"}},xaxis:{categories:[]}},series:[{name:"Документов",data:[]}]}},props:{item:Object},methods:{show:function(){this.$refs.dialog.show(),this.setData()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},setData:function(){var t=this;this.item.weekEntryData.forEach((function(e){t.options.xaxis.categories.push(e.createdAt.dayMonthCap),t.series[0].data.push(e.dayStats.dayDocuments)}))}}},ot=rt,it=Object(h["a"])(ot,tt,et,!1,null,null,null),st=it.exports;function lt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ct(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(a),!0).forEach((function(e){i()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}y()(it,"components",{QDialog:N["a"],QCard:x["a"],QCardSection:W["a"]});var dt={name:"statsComponent",components:{wDialogComponentVue:Z,aDialogComponentVue:st},data:function(){return{splitterModel:50,carousel:!1,slide:1}},computed:ct({},Object(s["c"])({listWeeks:"entriesStore/listWeeks"})),methods:{showWeeks:function(t){this.$q.dialog({component:Z,parent:this,item:t})},showAnalytics:function(t){this.$q.dialog({component:st,parent:this,item:t})}}},pt=dt,ut=a("a12b"),mt=a("0170"),ft=a("72db"),bt=Object(h["a"])(pt,P,E,!1,null,null,null),ht=bt.exports;y()(bt,"components",{QPage:q["a"],QVirtualScroll:ut["a"],QItem:k["a"],QItemSection:j["a"],QBtn:C["a"],QItemLabel:mt["a"],QFab:U["a"],QFabAction:ft["a"],QBadge:X["a"]}),y()(bt,"directives",{Ripple:B["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-center"},[a("analyticsChart",{attrs:{item:t.listAnalytics}})],1)},yt=[],qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-center"},[a("VueApexCharts",{attrs:{options:t.options,series:t.series}})],1)},wt=[],Ct={name:"documentsChart",components:{VueApexCharts:nt.a},data:function(){return{options:{chart:{id:"analyticsChart",type:"line",stacked:!0,toolbar:{show:!1},zoom:{enabled:!1},stroke:{curve:"smooth"},dataLabels:{enabled:!1}},dataLabels:{enabled:!1},legend:{position:"top"},xaxis:{categories:[],labels:{rotate:0}}},series:[{name:"Документы",data:[]},{name:"Доходы",data:[]},{name:"Затраты",data:[]},{name:"Выручка",data:[]}]}},props:{item:Object},created:function(){this.options.xaxis.categories=this.item.WK.map((function(t){return t.fullDate})),this.series[0].data=this.item.WD,this.series[1].data=this.item.WI,this.series[2].data=this.item.WE,this.series[3].data=this.item.WR}},vt=Ct,xt=Object(h["a"])(vt,qt,wt,!1,null,null,null),Ot=xt.exports;function kt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(a),!0).forEach((function(e){i()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Dt={name:"analyticsComponent",components:{analyticsChart:Ot},computed:jt({},Object(s["c"])({listAnalytics:"entriesStore/listAnalytics"}))},_t=Dt,St=Object(h["a"])(_t,gt,yt,!1,null,null,null),Qt=St.exports;function Pt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(a),!0).forEach((function(e){i()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}y()(St,"components",{QPage:q["a"]});var $t={name:"PageIndex",components:{createEntryComponent:Q,statsComponent:ht,analyticsComponent:Qt},data:function(){return{tab:"createEntry"}},methods:Et({},Object(s["b"])({fetchData:"entriesStore/fetchData"})),created:function(){this.fetchData()}},At=$t,It=a("4d5a"),Tt=a("e359"),Rt=a("429b"),Vt=a("7460"),Nt=a("09e3"),Wt=a("adad"),Ht=a("823b"),Kt=Object(h["a"])(At,n,r,!1,null,null,null);e["default"]=Kt.exports;y()(Kt,"components",{QLayout:It["a"],QHeader:Tt["a"],QTabs:Rt["a"],QTab:Vt["a"],QPageContainer:Nt["a"],QTabPanels:Wt["a"],QTabPanel:Ht["a"]})}}]);